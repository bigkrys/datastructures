<!DOCTYPE html>
<html>
    <body></body>
    <script>
  function swap(array,i,j){
    let temp = array[i];
    array[i] = array[j];
    array[j] = temp;
}

class MxHeap{
    constructor(n){
        this.headArray = new Array(n+1);//用数组进行存储数据，下标1开始
        this.length = 0;//当前堆中的数据
        this.maxCount = n;//堆中可以存放最大的数据是多少
    }
    insert(data){
        //往堆里插入一个元素
        if(this.length >= this.maxCount) {return;}//堆满 不允许插入
        this.length++;
        this.headArray[this.length] = data;//插入元素
        //从下往上堆化
        let i = this.length;
        let fatherIndex = Math.floor(i/2);
        while(fatherIndex > 0 && this.headArray[i] > this.headArray[fatherIndex]){
            //如果当前节点的值比父节点大，就对两个节点进行交换
            swap(this.headArray,i,fatherIndex);//交换两个节点的值
            i = fatherIndex;
            fatherIndex = Math.floor(i/2);
        }
    }
   
    removeTop(){
        if(this.length == 0) {return -1;}//堆顶没有数据
        this.headArray[1] = this.headArray[this.length];//把堆尾部的叶节点换上去
        this.headArray[this.length] = null;//删除最后一个节点
        this.length--;

        //从上往下进行堆化
        let i = 1;
        while(true){
            let maxPos = i;
            if(i*2 < this.length && this.headArray[i] < this.headArray[i*2]){
                maxPos = i*2;
            }
            if(i*2 + 1 < this.length && this.headArray[maxPos] < this.headArray[i*2 +1]){
                maxPos = i*2 +1;
            }
            if(maxPos == i){ break;}//左右子元素都不大于自己就退出循环
            swap(this.headArray,i,maxPos);//交换两个节点
            i = maxPos;//往下继续
        }

    }
}
   

    </script>
</html>
